- name: Checkout repo
  uses: actions/checkout@v4

- name: Setup Python
  uses: actions/setup-python@v5
  with:
    python-version: '3.11'

- name: Install dependencies
  run: pip install -r BlobDeleteEvent/requirements.txt

- name: 'Login via Azure'
  uses: azure/login@v2
  with:
    creds: ${{ secrets.AZURE_CREDENTIALS }}

- name: Deploy to Azure Function
  uses: Azure/functions-action@v1
  with:
    app-name: 'notifyemailapp'
    package: '.'
